<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 6 {r shuffling, echo=FALSE, fig.cap="Shuffling a deck of cards.", purl=FALSE, out.width="100%", out.height="100%"} # include_graphics("images/shutterstock/shutterstock_128283971.jpg") # | Técnicas cuantitativas</title>
  <meta name="description" content="Este documento forma parte de los materiales para la asignatura ‘Técnicas cuantitativas’ del Máster universitario en planificación, gobernanza y liderazgo territorial" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 6 {r shuffling, echo=FALSE, fig.cap="Shuffling a deck of cards.", purl=FALSE, out.width="100%", out.height="100%"} # include_graphics("images/shutterstock/shutterstock_128283971.jpg") # | Técnicas cuantitativas" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Este documento forma parte de los materiales para la asignatura ‘Técnicas cuantitativas’ del Máster universitario en planificación, gobernanza y liderazgo territorial" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 6 {r shuffling, echo=FALSE, fig.cap="Shuffling a deck of cards.", purl=FALSE, out.width="100%", out.height="100%"} # include_graphics("images/shutterstock/shutterstock_128283971.jpg") # | Técnicas cuantitativas" />
  
  <meta name="twitter:description" content="Este documento forma parte de los materiales para la asignatura ‘Técnicas cuantitativas’ del Máster universitario en planificación, gobernanza y liderazgo territorial" />
  

<meta name="author" content="Enric Aguilar y Benito Zaragozí" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-deck-of-cards-echofalse-fig-capstandard-deck-of-52-playing-cards-purlfalse-out-width100-include-graphicsimagesshutterstockshutterstock-670789453-jpg.html"/>
<link rel="next" href="el-muestreo-estadístico.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Técnicas cuantitativas</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Presentación</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#prerrequisitos"><i class="fa fa-check"></i><b>1.1</b> Prerrequisitos</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#tipos-de-ficheros"><i class="fa fa-check"></i><b>1.2</b> Tipos de ficheros</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#un-ejemplo-muy-sencillo"><i class="fa fa-check"></i><b>1.3</b> Un ejemplo muy sencillo</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#estructura-básica-de-un-documento-markdown"><i class="fa fa-check"></i><b>1.4</b> Estructura básica de un documento Markdown</a><ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#cabecera"><i class="fa fa-check"></i><b>1.4.1</b> Cabecera</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#insertar-código-r"><i class="fa fa-check"></i><b>1.4.2</b> Insertar código R</a></li>
<li class="chapter" data-level="1.4.3" data-path="index.html"><a href="index.html#formatos-de-texto"><i class="fa fa-check"></i><b>1.4.3</b> Formatos de texto</a></li>
<li class="chapter" data-level="1.4.4" data-path="index.html"><a href="index.html#generando-el-documento"><i class="fa fa-check"></i><b>1.4.4</b> Generando el documento</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introducción a R</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#r-como-lenguaje-de-programación"><i class="fa fa-check"></i><b>2.1</b> R como lenguaje de programación</a><ul>
<li class="chapter" data-level="2.1.1" data-path="intro.html"><a href="intro.html#utilizando-rstudio"><i class="fa fa-check"></i><b>2.1.1</b> Utilizando RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#interpreting-values"><i class="fa fa-check"></i><b>2.2</b> Interpreting values</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#variables"><i class="fa fa-check"></i><b>2.3</b> Variables</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#basic-types"><i class="fa fa-check"></i><b>2.4</b> Basic types</a><ul>
<li class="chapter" data-level="2.4.1" data-path="intro.html"><a href="intro.html#numeric"><i class="fa fa-check"></i><b>2.4.1</b> Numeric</a></li>
<li class="chapter" data-level="2.4.2" data-path="intro.html"><a href="intro.html#logical"><i class="fa fa-check"></i><b>2.4.2</b> Logical</a></li>
<li class="chapter" data-level="2.4.3" data-path="intro.html"><a href="intro.html#character"><i class="fa fa-check"></i><b>2.4.3</b> Character</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intro.html"><a href="intro.html#tidyverse"><i class="fa fa-check"></i><b>2.5</b> Tidyverse</a><ul>
<li class="chapter" data-level="2.5.1" data-path="intro.html"><a href="intro.html#stringr"><i class="fa fa-check"></i><b>2.5.1</b> stringr</a></li>
<li class="chapter" data-level="2.5.2" data-path="intro.html"><a href="intro.html#the-pipe-operator"><i class="fa fa-check"></i><b>2.5.2</b> The pipe operator</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="intro.html"><a href="intro.html#coding-style"><i class="fa fa-check"></i><b>2.6</b> Coding style</a></li>
<li class="chapter" data-level="2.7" data-path="intro.html"><a href="intro.html#exercise-104.1"><i class="fa fa-check"></i><b>2.7</b> Exercise 104.1</a></li>
<li class="chapter" data-level="2.8" data-path="intro.html"><a href="intro.html#exercise-104.2"><i class="fa fa-check"></i><b>2.8</b> Exercise 104.2</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="estadística-descriptiva.html"><a href="estadística-descriptiva.html"><i class="fa fa-check"></i><b>3</b> Estadística descriptiva</a></li>
<li class="chapter" data-level="4" data-path="estadística-inferencial.html"><a href="estadística-inferencial.html"><i class="fa fa-check"></i><b>4</b> Estadística inferencial</a><ul>
<li class="chapter" data-level="4.1" data-path="estadística-inferencial.html"><a href="estadística-inferencial.html#ht-activity"><i class="fa fa-check"></i><b>4.1</b> Promotions activity</a><ul>
<li class="chapter" data-level="4.1.1" data-path="estadística-inferencial.html"><a href="estadística-inferencial.html#does-gender-affect-promotions-at-a-bank"><i class="fa fa-check"></i><b>4.1.1</b> Does gender affect promotions at a bank?</a></li>
<li class="chapter" data-level="4.1.2" data-path="estadística-inferencial.html"><a href="estadística-inferencial.html#shuffling-once"><i class="fa fa-check"></i><b>4.1.2</b> Shuffling once</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="r-deck-of-cards-echofalse-fig-capstandard-deck-of-52-playing-cards-purlfalse-out-width100-include-graphicsimagesshutterstockshutterstock-670789453-jpg.html"><a href="r-deck-of-cards-echofalse-fig-capstandard-deck-of-52-playing-cards-purlfalse-out-width100-include-graphicsimagesshutterstockshutterstock-670789453-jpg.html"><i class="fa fa-check"></i><b>5</b> <code>{r deck-of-cards, echo=FALSE, fig.cap="Standard deck of 52 playing cards.", purl=FALSE, out.width="100%"} # include_graphics("images/shutterstock/shutterstock_670789453.jpg") #</code></a></li>
<li class="chapter" data-level="6" data-path="r-shuffling-echofalse-fig-capshuffling-a-deck-of-cards-purlfalse-out-width100-out-height100-include-graphicsimagesshutterstockshutterstock-128283971-jpg.html"><a href="r-shuffling-echofalse-fig-capshuffling-a-deck-of-cards-purlfalse-out-width100-out-height100-include-graphicsimagesshutterstockshutterstock-128283971-jpg.html"><i class="fa fa-check"></i><b>6</b> <code>{r shuffling, echo=FALSE, fig.cap="Shuffling a deck of cards.", purl=FALSE, out.width="100%", out.height="100%"} # include_graphics("images/shutterstock/shutterstock_128283971.jpg") #</code></a><ul>
<li class="chapter" data-level="6.0.1" data-path="r-shuffling-echofalse-fig-capshuffling-a-deck-of-cards-purlfalse-out-width100-out-height100-include-graphicsimagesshutterstockshutterstock-128283971-jpg.html"><a href="r-shuffling-echofalse-fig-capshuffling-a-deck-of-cards-purlfalse-out-width100-out-height100-include-graphicsimagesshutterstockshutterstock-128283971-jpg.html#shuffling-16-times"><i class="fa fa-check"></i><b>6.0.1</b> Shuffling 16 times</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="el-muestreo-estadístico.html"><a href="el-muestreo-estadístico.html"><i class="fa fa-check"></i><b>7</b> El muestreo estadístico</a><ul>
<li class="chapter" data-level="7.1" data-path="el-muestreo-estadístico.html"><a href="el-muestreo-estadístico.html#example-one"><i class="fa fa-check"></i><b>7.1</b> Example one</a></li>
<li class="chapter" data-level="7.2" data-path="el-muestreo-estadístico.html"><a href="el-muestreo-estadístico.html#example-two"><i class="fa fa-check"></i><b>7.2</b> Example two</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="regresiones.html"><a href="regresiones.html"><i class="fa fa-check"></i><b>8</b> Regresiones</a></li>
<li class="chapter" data-level="9" data-path="estadística-multivariante.html"><a href="estadística-multivariante.html"><i class="fa fa-check"></i><b>9</b> Estadística multivariante</a></li>
<li class="chapter" data-level="" data-path="referencias.html"><a href="referencias.html"><i class="fa fa-check"></i>Referencias</a></li>
<li class="divider"></li>
<li><a href="https://github.com/geourv/quanti" target="blank">Publicado con bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Técnicas cuantitativas</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-shuffling-echofalse-fig.capshuffling-a-deck-of-cards.-purlfalse-out.width100-out.height100-include_graphicsimagesshutterstockshutterstock_128283971.jpg" class="section level1">
<h1><span class="header-section-number">Capítulo 6</span> <code>{r shuffling, echo=FALSE, fig.cap="Shuffling a deck of cards.", purl=FALSE, out.width="100%", out.height="100%"} # include_graphics("images/shutterstock/shutterstock_128283971.jpg") #</code></h1>
<p>We’ve saved one such shuffling in the <code>promotions_shuffled</code> data frame of the <code>moderndive</code> package. If you compare the original <code>promotions</code> and the shuffled <code>promotions_shuffled</code> data frames, you’ll see that while the <code>decision</code> variable is identical, the <code>gender</code> variable has changed.</p>
<p>Let’s repeat the same exploratory data analysis we did for the original <code>promotions</code> data on our <code>promotions_shuffled</code> data frame. Let’s create a barplot visualizing the relationship between <code>decision</code> and the new shuffled <code>gender</code> variable and compare this to the original unshuffled version in Figure <a href="r-shuffling-echofalse-fig-capshuffling-a-deck-of-cards-purlfalse-out-width100-out-height100-include-graphicsimagesshutterstockshutterstock-128283971-jpg.html#fig:promotions-barplot-permuted">6.1</a>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="r-shuffling-echofalse-fig-capshuffling-a-deck-of-cards-purlfalse-out-width100-out-height100-include-graphicsimagesshutterstockshutterstock-128283971-jpg.html#cb14-1"></a><span class="kw">ggplot</span>(promotions_shuffled, </span>
<span id="cb14-2"><a href="r-shuffling-echofalse-fig-capshuffling-a-deck-of-cards-purlfalse-out-width100-out-height100-include-graphicsimagesshutterstockshutterstock-128283971-jpg.html#cb14-2"></a>       <span class="kw">aes</span>(<span class="dt">x =</span> gender, <span class="dt">fill =</span> decision)) <span class="op">+</span></span>
<span id="cb14-3"><a href="r-shuffling-echofalse-fig-capshuffling-a-deck-of-cards-purlfalse-out-width100-out-height100-include-graphicsimagesshutterstockshutterstock-128283971-jpg.html#cb14-3"></a><span class="st">  </span><span class="kw">geom_bar</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb14-4"><a href="r-shuffling-echofalse-fig-capshuffling-a-deck-of-cards-purlfalse-out-width100-out-height100-include-graphicsimagesshutterstockshutterstock-128283971-jpg.html#cb14-4"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Gender of résumé name&quot;</span>)</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;gender&#39; (override with `.groups` argument)
## `summarise()` regrouping output by &#39;gender&#39; (override with `.groups` argument)</code></pre>
<div class="figure"><span id="fig:promotions-barplot-permuted"></span>
<img src="tecnicas-cuantitativas_files/figure-html/promotions-barplot-permuted-1.png" alt="Barplots of relationship of promotion with gender (left) and shuffled gender (right)." width="672" />
<p class="caption">
Figura 6.1: Barplots of relationship of promotion with gender (left) and shuffled gender (right).
</p>
</div>
<p>It appears the difference in “male names” versus “female names” promotion rates is now different. Compared to the original data in the left barplot, the new “shuffled” data in the right barplot has promotion rates that are much more similar.</p>
<p>Let’s also compute the proportion of résumés accepted for promotion for each group:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="r-shuffling-echofalse-fig-capshuffling-a-deck-of-cards-purlfalse-out-width100-out-height100-include-graphicsimagesshutterstockshutterstock-128283971-jpg.html#cb16-1"></a>promotions_shuffled <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb16-2"><a href="r-shuffling-echofalse-fig-capshuffling-a-deck-of-cards-purlfalse-out-width100-out-height100-include-graphicsimagesshutterstockshutterstock-128283971-jpg.html#cb16-2"></a><span class="st">  </span><span class="kw">group_by</span>(gender, decision) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb16-3"><a href="r-shuffling-echofalse-fig-capshuffling-a-deck-of-cards-purlfalse-out-width100-out-height100-include-graphicsimagesshutterstockshutterstock-128283971-jpg.html#cb16-3"></a><span class="st">  </span><span class="kw">tally</span>() <span class="co"># Same as summarize(n = n())</span></span></code></pre></div>
<pre><code>## # A tibble: 4 x 3
## # Groups:   gender [2]
##   gender decision     n
##   &lt;fct&gt;  &lt;fct&gt;    &lt;int&gt;
## 1 male   not          6
## 2 male   promoted    18
## 3 female not          7
## 4 female promoted    17</code></pre>
<p>So in this hypothetical universe of no discrimination, <span class="math inline">\(18/24 = 0.75 = 75\%\)</span> of “male” résumés were selected for promotion. On the other hand, <span class="math inline">\(17/24 = 0.708 = 70.8\%\)</span> of “female” résumés were selected for promotion.</p>
<p>Let’s next compare these two values. It appears that résumés with stereotypically male names were selected for promotion at a rate that was <span class="math inline">\(0.75 - 0.708 = 0.042 = 4.2\%\)</span> different than résumés with stereotypically female names.</p>
<p>Observe how this difference in rates is not the same as the difference in rates of 0.292 = 29.2% we originally observed. This is once again due to <em>sampling variation</em>. How can we better understand the effect of this sampling variation? By repeating this shuffling several times!</p>
<div id="shuffling-16-times" class="section level3">
<h3><span class="header-section-number">6.0.1</span> Shuffling 16 times</h3>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-deck-of-cards-echofalse-fig-capstandard-deck-of-52-playing-cards-purlfalse-out-width100-include-graphicsimagesshutterstockshutterstock-670789453-jpg.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="el-muestreo-estadístico.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["tecnicas-cuantitativas.pdf", "tecnicas-cuantitativas.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
